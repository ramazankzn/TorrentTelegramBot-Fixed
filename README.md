# TorrentTelegramBot - Fixed Version ‚úÖ

**–£–ª—É—á—à–µ–Ω–Ω–∞—è –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è** Telegram –±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä—Ä–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Radarr, Sonarr –∏ qBittorrent.

## üö® –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (28.10.2025)

**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–´ –í–°–ï –û–®–ò–ë–ö–ò –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò!**

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- üîß **KeyboardFactory.java** - –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π Builder API –¥–ª—è Telegram Bot API 7.10.0
- üîß **BotConfig.java** - –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π TelegramClient bean
- üîß **pom.xml** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `telegrambots-client` –¥–ª—è OkHttpTelegramClient
- üîß **API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ builder pattern

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–í—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã** - –ø—Ä–æ–µ–∫—Ç 100% —Ä–∞–±–æ—á–∏–π
- üéÜ **Spring Boot 3.1.0** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- ü§ñ **Telegram Bot API 7.10.0** - –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- üöÄ **OkHttp 4.12.0** - –Ω–∞–¥—ë–∂–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å—ã —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤
- ‚å®Ô∏è **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** - —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
git clone https://github.com/ramazankzn/TorrentTelegramBot-Fixed.git
cd TorrentTelegramBot-Fixed
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/main/resources/application.yml`:

```yaml
bot:
  token: "YOUR_BOT_TOKEN_FROM_BOTFATHER"

radarr:
  url: http://localhost:7878
  api-key: "YOUR_RADARR_API_KEY"

sonarr:
  url: http://localhost:8989
  api-key: "YOUR_SONARR_API_KEY"

qbittorrent:
  url: http://localhost:8080
  username: admin
  password: "YOUR_QBITTORRENT_PASSWORD"
```

### 3. –ó–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
mvn clean install
mvn spring-boot:run

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å JAR –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
mvn clean package
java -jar target/torrent-telegram-bot-2.0.0.jar
```

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- `/status` - –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Radarr/Sonarr/qBittorrent)
- `/subscribe` - –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–æ—Ä—Ä–µ–Ω—Ç–∞—Ö
- `/unsubscribe` - –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üì• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É:
- –ú–∞–≥–Ω–∏—Ç–Ω—É—é —Å—Å—ã–ª–∫—É: `magnet:?xt=urn:btih:...`
- –°—Å—ã–ª–∫—É –Ω–∞ .torrent —Ñ–∞–π–ª

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/java/com/torrentbot/
‚îú‚îÄ‚îÄ TorrentTelegramBotApplication.java  # üöÄ –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å Spring Boot
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îî‚îÄ‚îÄ TorrentBot.java                 # ü§ñ –û—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ BotConfig.java                  # ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TelegramClient
‚îî‚îÄ‚îÄ service/
    ‚îú‚îÄ‚îÄ MessageHandler.java             # üì® –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ NotificationService.java        # üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ RadarrService.java              # üé¨ API Radarr (—Ñ–∏–ª—å–º—ã)
    ‚îú‚îÄ‚îÄ SonarrService.java              # üì∫ API Sonarr (—Å–µ—Ä–∏–∞–ª—ã)
    ‚îú‚îÄ‚îÄ QBittorrentService.java         # ‚¨áÔ∏è API qBittorrent
    ‚îî‚îÄ‚îÄ keyboard/
        ‚îî‚îÄ‚îÄ KeyboardFactory.java        # ‚å®Ô∏è –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| **Spring Boot** | 3.1.0 | –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Telegram Bot API** | 7.10.0 | Long polling —Å Spring —Å—Ç–∞—Ä—Ç–µ—Ä–æ–º |
| **OkHttp** | 4.12.0 | HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API |
| **Jackson** | - | JSON –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| **H2 Database** | - | –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Java** | 17+ | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è |
| **Maven** | 3.8+ | –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ |

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### Radarr (–§–∏–ª—å–º—ã)
1. –û—Ç–∫—Ä–æ–π—Ç–µ Radarr –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. Settings ‚Üí General ‚Üí Security ‚Üí API Key
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ `radarr.api-key`

### Sonarr (–°–µ—Ä–∏–∞–ª—ã)
1. –û—Ç–∫—Ä–æ–π—Ç–µ Sonarr –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. Settings ‚Üí General ‚Üí Security ‚Üí API Key
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ `sonarr.api-key`

### qBittorrent
1. –û—Ç–∫—Ä–æ–π—Ç–µ qBittorrent –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. Tools ‚Üí Options ‚Üí Web UI
3. –í–∫–ª—é—á–∏—Ç–µ Web UI –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ "no suitable constructor"
**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û!** –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

### –û—à–∏–±–∫–∞ "package okhttp3 does not exist"
**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û!** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ pom.xml.

### –û—à–∏–±–∫–∞ "cannot find symbol"
**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û!** –í—Å–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Å–æ–∑–¥–∞–Ω—ã.

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ —Å–µ—Ä–≤–∏—Å–∞–º
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í–º–µ—Å—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `application.yml` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
export BOT_TOKEN="your_telegram_bot_token"
export RADARR_URL="http://your-radarr:7878"
export RADARR_API_KEY="your_radarr_api_key"
export SONARR_URL="http://your-sonarr:8989"
export SONARR_API_KEY="your_sonarr_api_key"
export QBITTORRENT_URL="http://your-qbittorrent:8080"
export QBITTORRENT_USERNAME="admin"
export QBITTORRENT_PASSWORD="your_password"
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ!

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. üìã –û—Ç–∫—Ä–æ–π—Ç–µ [Issue](https://github.com/ramazankzn/TorrentTelegramBot-Fixed/issues)
2. üîÑ –°–æ–∑–¥–∞–π—Ç–µ Pull Request —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
3. ‚≠ê –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–º–æ–≥!

---

**üéâ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.**